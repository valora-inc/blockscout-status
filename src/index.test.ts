import { blockscoutResponseIncludesTransfer, main } from './index'

const blockscoutResponse = {
  data: {
    tokenTransferTxs: {
      pageInfo: {
        endCursor: 'YXJyYXljb25uZWN0aW9uOjI0',
        hasNextPage: true,
        hasPreviousPage: false,
        startCursor: 'YXJyYXljb25uZWN0aW9uOjA=',
      },
      edges: [
        {
          node: {
            blockNumber: 20686644,
            feeToken: 'CELO',
            gasPrice: '106480921736',
            gasUsed: '539760',
            gatewayFee: '0',
            gatewayFeeRecipient: null,
            input:
              '0xc6427474000000000000000000000000e04f2d98e265daa98bd674e4d340e3d0348617a20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000003840862d12f00000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000a688906bd8b00000000000000000000000000000000000000000000000000000a69ec4c35e88a00000000000000000000000000005b95c32d4861538de7cbc10d52f2cb30d3a134030000000000000000000000000000000000000000000000000000000064cc2a1c0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000471ece3750da237f93b8e339c536989b8978a438000000000000000000000000e273ad7ee11dcfaa87383ad5977ee1504ac07568000000000000000000000000d8763cba276a3738e6de85b4b3bf5fded6d6ca73000000000000000000000000471ece3750da237f93b8e339c536989b8978a4380000000000000000000000000000000000000000000000000000000000000003000000000000000000000000202019ed34abd85af1e54ec47e9aa558e6990b1c0000000000000000000000003a88e34145e88d52427fe64c72f75bdb5b8cb24200000000000000000000000090d2986ab3e2b08afe7d7a5e0e0302b7b2464aec0000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000159f437509e61896738ea8cdb6cded618c0e5090321e00000000000000000000000000000000000000000000000000000000000000000000000000000000000015970b12522ca9b4054807a2c5b736149a5be6f6700100000000000000000000000000000000000000000000000000000000000000000000000000000000000048777a8255ca72412f0d706dc03c9d1987306b4cad22d9db95e6ae61c104a7b6f6c78d7993b94ec901b73ffc6b5123de3c8e460490543ab93a3be7d70824f1666343df49e219199b8c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
            timestamp: '2023-08-03T22:27:46.000000Z',
            tokenTransfer: {
              edges: [
                {
                  node: {
                    fromAccountHash: null,
                    fromAddressHash:
                      '0x5b95c32d4861538de7cbc10d52f2cb30d3a13403',
                    toAccountHash: null,
                    toAddressHash: '0x202019ed34abd85af1e54ec47e9aa558e6990b1c',
                    tokenAddress: '0x471ece3750da237f93b8e339c536989b8978a438',
                    tokenId: null,
                    tokenType: 'ERC-20',
                    value: '192000000000000000000',
                  },
                },
              ],
            },
            transactionHash:
              '0xed003ddb835cc7cc40e4c159240bb0010be991c1c98a228f0d9e68c1a1e1bcce',
          },
        },
      ],
    },
  },
}

describe(main, () => {
  it('blockscoutResponseIncludesTransfer', () => {
    expect(
      blockscoutResponseIncludesTransfer(blockscoutResponse, {
        args: {
          from: '0x5b95c32d4861538de7cbc10d52f2cb30d3a13403',
          to: '0x202019ed34abd85af1e54ec47e9aa558e6990b1c',
          value: BigInt('192000000000000000000'),
        },
        transactionHash:
          '0xed003ddb835cc7cc40e4c159240bb0010be991c1c98a228f0d9e68c1a1e1bcce',
      }),
    ).toBe(true)
  })
})
